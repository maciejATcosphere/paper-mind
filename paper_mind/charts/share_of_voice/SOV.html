<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <style>
            body {
                font: 10px sans-serif;
            }
            .axis path,
            .axis line {
                fill: none;
                stroke: #000;
                shape-rendering: crispEdges;
            }
            .series0 {
                fill: steelblue;
                fill-opacity: 0.7;
            }
            .series1 {
                fill: red;
                fill-opacity: 0.5;
            }
            </style>
        <script src="http://d3js.org/d3.v3.js"></script>

        <script src='data/sov_ma5.js'></script>
        <script src='data/sov.js'></script>
        <script src='data/sov_removed_launches_ma5.js'></script>
        <script src='data/vom_ma5.js'></script>
        <script src='data/vom.js'></script>
        <script src='data/vom_removed_launches_ma5.js'></script>

        <script src='data/sov_ma5_2nd.js'></script>
        <script src='data/vom_ma5_2nd.js'></script>
        <script src='data/sov_2nd.js'></script>
        <script src='data/vom_2nd.js'></script>

        <script src='data/sov_removed_launches_ma5_2nd.js'></script>
        <script src='data/vom_removed_launches_ma5_2nd.js'></script>

        <script src='data/fb_paid_impressions_ma5.js'></script>
        <script src='data/tw_paid_impressions_ma5.js'></script>
        <script src='data/total_impressions_ma5.js'></script>
        <script src='data/fb_spend_ma5.js'></script>
        <script src='data/tw_spend_ma5.js'></script>
        <script src='data/total_organic_impressions_ma5.js'></script>
        <script src='data/total_organic_impressions_ma5_2nd.js'></script>

        <script src='data/total_impressions_ma5_2nd.js'></script>
        <script src='data/total_spend_ma5_2nd.js'></script>
        <script src='data/total_spend_ma5.js'></script>
    </head>

    <body>
        <!-- Paid FB Impressions vs SOV (VOM) -->
        <div id="chart-0"></div>
        <div id="chart-1"></div>
        <!-- Paid TW Impressions vs SOV (VOM) -->
        <div id="chart-2"></div>
        <div id="chart-3"></div>
        <!-- Total Paid Impressions vs SOV (VOM) -->
        <div id="chart-4"></div>
        <div id="chart-5"></div>
        <!-- FB Spend vs SOV (VOM) -->
        <div id="chart-6"></div>
        <div id="chart-7"></div>
        <!-- TW Spend vs SOV (VOM) -->
        <div id="chart-8"></div>
        <div id="chart-9"></div>
        <!-- Total Spend vs SOV (VOM) -->
        <div id="chart-10"></div>
        <div id="chart-11"></div>
        <!-- Total Spend vs SOV (VOM) - launch dates removed -->
        <div id="chart-12"></div>
        <div id="chart-13"></div>

        <script src="basis.js"></script>
        <script>
            g_parseDate = d3.time.format("%d-%b-%y").parse;
            function parse_data(data) {
                data.forEach(function(d) {
                    d.x = g_parseDate(d.x);
                    d.y = +d.y;
                });
            }

            parse_data(window.sov_ma5);
            parse_data(window.sov);
            parse_data(window.sov_removed_launches_ma5);
            parse_data(window.vom_ma5);
            parse_data(window.vom);
            parse_data(window.vom_removed_launches_ma5);

            parse_data(window.sov_ma5_2nd);
            parse_data(window.vom_ma5_2nd);
            parse_data(window.sov_2nd);
            parse_data(window.vom_2nd);

            parse_data(window.sov_removed_launches_ma5_2nd);
            parse_data(window.vom_removed_launches_ma5_2nd);

            // create_stage(
            //     'chart-13',
            //     window.vom_removed_launches_ma5,
            //     window.total_spend_ma5,
            //     'Volume of Mentions (launch removed)',
            //     'Total Spend'
            // );
            // create_area(window.vom_removed_launches_ma5, window.total_spend_ma5, 'chart-13');

            parse_data(window.fb_paid_impressions_ma5);
            parse_data(window.tw_paid_impressions_ma5);
            parse_data(window.total_organic_impressions_ma5);
            parse_data(window.total_organic_impressions_ma5_2nd);
            parse_data(window.fb_spend_ma5);
            parse_data(window.tw_spend_ma5);
            parse_data(window.total_spend_ma5);

            parse_data(window.total_impressions_ma5_2nd);
            parse_data(window.total_spend_ma5_2nd);

            // facebook paid impressions
            // create_stage(
            //     'chart-0',
            //     window.sov_ma5,
            //     window.fb_paid_impressions_ma5,
            //     'Share of Voice',
            //     'Facebook Paid Impressions'
            // );
            // create_area(window.sov_ma5, window.fb_paid_impressions_ma5, 'chart-0');

            // create_stage(
            //     'chart-1',
            //     window.vom_ma5,
            //     window.fb_paid_impressions_ma5,
            //     'Volume of Mentions',
            //     'Facebook Paid Impressions'
            // );
            // create_area(window.vom_ma5, window.fb_paid_impressions_ma5, 'chart-1');



            // total organic impressions
            // create_stage(
            //     'chart-2',
            //     window.sov_removed_launches_ma5_2nd,
            //     window.total_organic_impressions_ma5,
            //     'Share of Voice ',
            //     'Total Organic Impressions'
            // );
            // create_area(window.sov_removed_launches_ma5_2nd, window.total_organic_impressions_ma5, 'chart-2');

            create_stage(
                'chart-1',
                window.vom,
                window.total_organic_impressions_ma5,
                'Volume of Mentions',
                'Total Organic Impressions'
            );
            create_area(window.vom, window.total_organic_impressions_ma5, 'chart-1');

            create_stage(
                'chart-2',
                window.sov_removed_launches_ma5_2nd,
                window.total_organic_impressions_ma5_2nd,
                'Share of Voice (Q3 & Q4)',
                'Total Organic Impressions'
            );
            create_area(window.sov_removed_launches_ma5_2nd, window.total_organic_impressions_ma5_2nd, 'chart-2');

            create_stage(
                'chart-3',
                window.vom_removed_launches_ma5_2nd,
                window.total_organic_impressions_ma5_2nd,
                'Volume of Mentions (Q3 & Q4)',
                'Total Organic Impressions'
            );
            create_area(window.vom_removed_launches_ma5_2nd, window.total_organic_impressions_ma5_2nd, 'chart-3');

            // total paid impressions
            create_stage(
                'chart-4',
                window.sov_removed_launches_ma5_2nd,
                window.total_impressions_ma5_2nd,
                'Share of Voice (Q3 & Q4)',
                'Total Paid Impressions'
            );
            create_area(window.sov_removed_launches_ma5_2nd, window.total_impressions_ma5_2nd, 'chart-4');

            create_stage(
                'chart-5',
                window.vom_removed_launches_ma5_2nd,
                window.total_impressions_ma5_2nd,
                'Volume of Mentions (Q3 & Q4)',
                'Total Paid Impressions'
            );
            create_area(window.vom_removed_launches_ma5_2nd, window.total_impressions_ma5_2nd, 'chart-5');

            // facebook spend
            // create_stage(
            //     'chart-6',
            //     window.sov_ma5,
            //     window.fb_spend_ma5,
            //     'Share of Voice',
            //     'Facebook Spend'
            // );
            // create_area(window.sov_ma5, window.fb_spend_ma5, 'chart-6');

            // create_stage(
            //     'chart-7',
            //     window.vom_ma5,
            //     window.fb_spend_ma5,
            //     'Volume of Mentions',
            //     'Facebook Spend'
            // );
            // create_area(window.vom_ma5, window.fb_spend_ma5, 'chart-7');

            // twitter spend
            // create_stage(
            //     'chart-8',
            //     window.sov,
            //     window.tw_spend_ma5,
            //     'Share of Voice',
            //     'Twitter Spend'
            // );
            // create_area(window.sov, window.tw_spend_ma5, 'chart-8');

            // create_stage(
            //     'chart-9',
            //     window.vom,
            //     window.tw_spend_ma5,
            //     'Volume of Mentions',
            //     'Twitter Spend'
            // );
            // create_area(window.vom, window.tw_spend_ma5, 'chart-9');

            // total spend
            create_stage(
                'chart-10',
                window.sov,
                window.total_spend_ma5,
                'Share of Voice',
                'Total Spend'
            );
            create_area(window.sov, window.total_spend_ma5, 'chart-10');

            create_stage(
                'chart-11',
                window.vom,
                window.total_spend_ma5,
                'Volume of Mentions',
                'Total Spend'
            );
            create_area(window.vom, window.total_spend_ma5, 'chart-11');

            // total spend
            create_stage(
                'chart-12',
                window.sov_2nd,
                window.total_spend_ma5_2nd,
                'Share of Voice',
                'Total Spend (Q3 & Q4)'
            );
            create_area(window.sov_2nd, window.total_spend_ma5_2nd, 'chart-12');

            create_stage(
                'chart-13',
                window.vom_2nd,
                window.total_spend_ma5_2nd,
                'Volume of Mentions',
                'Total Spend (Q3 & Q4)'
            );
            create_area(window.vom_2nd, window.total_spend_ma5_2nd, 'chart-13');

            window.setTimeout(function () {
                update_area(window.sov_removed_launches_ma5_2nd, 'chart-12',
                    'Share of Voice (launch removed)');
                update_area(window.vom_removed_launches_ma5_2nd, 'chart-13',
                    'Volume of Mentions (launch removed)');
            }, 10000);
        </script>
    </body>
</html>